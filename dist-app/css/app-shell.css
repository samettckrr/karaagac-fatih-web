/* ===== KF App Shell — v2.2 (tabs ortada, chip yok) ===== */
:root{
  --bg1:#eef3f0; --bg2:#e6efe9; --glass:#ffffffba; --glass-strong:#ffffffd8;
  --stroke:#dfe7e1; --text:#0f1e17; --muted:#5e6e65;
  --brand:#179a52; --brand-weak:#e9f7ef; --accent:#67c587; --danger:#e23c3c;
  --radius:16px; --shadow:0 16px 42px rgba(9,30,20,.10);
  --appbar-h:64px; --tabbar-h:78px;
  --s-top: env(safe-area-inset-top); --s-right: env(safe-area-inset-right);
  --s-bottom: env(safe-area-inset-bottom); --s-left: env(safe-area-inset-left);
}

*{box-sizing:border-box} html,body{height:100%}
body{
  margin:0; color:var(--text);
  font-family: ui-rounded, system-ui, -apple-system, "SF Pro Rounded", Segoe UI, Inter, Roboto, Arial, sans-serif;
  font-weight:500; line-height:1.35;
  background:
    radial-gradient(1200px 700px at 20% -10%, #f7fbf8 0%, transparent 60%),
    radial-gradient(900px 600px at 100% 0%, #eaf6ee 0%, transparent 70%),
    linear-gradient(180deg, var(--bg1) 0%, var(--bg2) 100%);
}
body::after{content:"";pointer-events:none;position:fixed;inset:0;background-image:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' opacity='.04' width='80' height='80'%3E%3Crect width='1' height='1' fill='%23000'/%3E%3C/svg%3E");mix-blend-mode:multiply}

.app{min-height:100dvh;display:flex;flex-direction:column;padding-left:var(--s-left);padding-right:var(--s-right);overscroll-behavior-y:contain}

/* ---------- ÜST BAR ---------- */
.appbar{
  position:sticky; top:0; z-index:30;
  height:calc(var(--appbar-h)+var(--s-top)); padding-top:var(--s-top);
  background:var(--glass); backdrop-filter:saturate(160%) blur(14px);
  border-bottom:1px solid var(--stroke);
}
.appbar__inner{
  height:var(--appbar-h); display:grid; align-items:center;
  grid-template-columns:44px 1fr 44px; gap:10px; padding:0 12px;
}
.appbar__logo{
  width:36px;height:36px;border-radius:12px;overflow:hidden;display:grid;place-items:center;
  background:linear-gradient(180deg,#f2fbf6,#e9f6ef);border:1px solid #cfe6d9;box-shadow:inset 0 1px 0 #fff
}
.appbar__logo img{width:100%;height:100%;object-fit:cover}
.title-stack{display:flex;flex-direction:column;line-height:1.1}
.title-stack .t1{font-weight:800;font-size:17px;letter-spacing:.1px}
.title-stack .t2{
  margin-top:4px; font-size:12px; font-weight:650; color:var(--muted);
  /* düz metin: “Paz · 28 Eyl 2025 · Tema: Oto” */
  opacity:.85;
}
.appbar__actions{display:flex;justify-content:flex-end;align-items:center;gap:8px}
.icon-btn{
  width:36px;height:36px;border-radius:12px;border:1px solid var(--stroke);
  background:var(--glass-strong);display:grid;place-items:center;cursor:pointer;box-shadow:0 6px 18px rgba(9,30,20,.10)
}
.icon-btn--alert{position:relative}
.icon-btn--alert::after{content:"";position:absolute;top:6px;right:6px;width:8px;height:8px;background:var(--brand);border:2px solid #fff;border-radius:999px}

/* ---------- İÇERİK/KART ---------- */
.content{flex:1 1 auto;overflow:auto;padding:16px;padding-bottom:calc(16px + var(--tabbar-h) + var(--s-bottom))}
.card{background:var(--glass-strong);border:1px solid var(--stroke);border-radius:calc(var(--radius)+2px);box-shadow:var(--shadow);padding:14px;margin-bottom:14px}
.h6{font-size:13px;font-weight:900;letter-spacing:.2px;color:#173f2b;margin:0 0 8px}
.sub{font-size:12px;color:var(--muted)}
.grid{display:grid;gap:12px}
@media (min-width:768px){ .grid--2{grid-template-columns:repeat(2,1fr)} .grid--3{grid-template-columns:repeat(3,1fr)} }

/* ---------- TABBAR (hepsi aynı hatta, orta civarda Home) ---------- */
.tabbar{
  position:sticky; bottom:0; z-index:40;
  height:calc(var(--tabbar-h)+var(--s-bottom)); padding-bottom:var(--s-bottom);
  background:var(--glass); border-top:1px solid var(--stroke);
  backdrop-filter:blur(12px) saturate(160%);
}
.tabbar__wrap{
  height:var(--tabbar-h); display:flex; align-items:center; justify-content:center;
  gap:8px; padding:6px 10px; overflow-x:auto; scrollbar-width:none; -ms-overflow-style:none;
}
.tabbar__wrap::-webkit-scrollbar{display:none}

/* tab: ikon + küçük etiket */
.tab{
  flex:0 0 auto;
  display:flex; flex-direction:column; align-items:center; justify-content:center; gap:6px;
  min-width:74px; height:56px; padding:8px 10px;
  border-radius:14px; border:1px solid transparent; text-decoration:none;
  background:var(--glass-strong); color:#41554a;
  font-size:11px; font-weight:850; letter-spacing:.1px;
  box-shadow:0 4px 12px rgba(9,30,20,.06);
  transform:translateY(0); transition:all .18s ease;
}
.tab__icon{ font-size:18px; line-height:0 }

/* aktif: renk, çerçeve, hafif pop-out */
.tab--active{
  color:#0f3e26; background:#eefcf5; border-color:#bfead1;
  box-shadow:0 10px 22px rgba(23,154,82,.18), inset 0 1px 0 #ffffffd9;
  transform:translateY(-6px);
}

/* basılı tutma hissi (kliksiz cihazlarda da faydalı) */
.tab:active{ transform:translateY(-3px); filter:saturate(1.1) }

/* kırmızı varyant ihtiyacı olursa */
.tab--danger{ color:#7f1d1d; background:#fef2f2; border-color:#fecaca }
.tab--danger.tab--active{ background:#fee2e2; border-color:#fca5a5; box-shadow:0 10px 22px rgba(190,18,60,.18) }

/* ---------- Bottom sheet (opsiyonel) ---------- */
.subdock{
  position:fixed; left:0; right:0; bottom:calc(var(--tabbar-h) + var(--s-bottom) + 6px);
  margin:0 auto; max-width:880px;
  background:var(--glass-strong); border:1px solid var(--stroke);
  border-radius:20px; box-shadow:0 24px 70px rgba(9,30,20,.18);
  padding:12px; display:none; z-index:45; backdrop-filter:blur(16px) saturate(160%);
}
.subdock--show{ display:block; animation:subdockIn .2s ease both }
@keyframes subdockIn{ from{ transform:translateY(12px); opacity:.0 } to{ transform:none; opacity:1 } }
.subdock__grid{ display:grid; grid-template-columns:repeat(4, minmax(0,1fr)); gap:8px }
.subdock__item{
  height:64px; border-radius:14px; border:1px solid var(--stroke);
  display:flex; align-items:center; gap:10px; padding:8px 10px; text-decoration:none; color:var(--text);
  background:var(--glass);
}
.subdock__item i{ width:32px; height:32px; border-radius:10px; background:#edf3ef; display:grid; place-items:center; font-style:normal; font-weight:900 }

/* ---------- Animasyon/PTR (öncekiyle uyumlu) ---------- */
.view{will-change:transform,opacity}
.slide-in-right{ animation:slideInRight .28s ease both }
.slide-out-left{ animation:slideOutLeft .24s ease both }
.slide-in-left{ animation:slideInLeft .28s ease both }
.slide-out-right{ animation:slideOutRight .24s ease both }
@keyframes slideInRight{from{opacity:.2;transform:translateX(40px)}to{opacity:1;transform:none}}
@keyframes slideOutLeft{from{opacity:1;transform:none}to{opacity:.01;transform:translateX(-40px)}}
@keyframes slideInLeft{from{opacity:.2;transform:translateX(-40px)}to{opacity:1;transform:none}}
@keyframes slideOutRight{from{opacity:1;transform:none}to{opacity:.01;transform:translateX(40px)}}

.ptr{ position:absolute; top:0; left:0; right:0; height:0; overflow:visible; display:flex; justify-content:center; pointer-events:none }
.ptr__indicator{
  margin-top: calc(var(--s-top) + 10px);
  width:36px; height:36px; border-radius:999px; border:3px solid #def2e6; border-top-color:#179a52;
  opacity:0; transform:scale(.8) rotate(0deg); transition:opacity .15s, transform .15s;
}
.ptr--pulling .ptr__indicator{ opacity:1; transform:scale(1) rotate(180deg) }
.ptr--refreshing .ptr__indicator{ opacity:1; animation:spin .9s linear infinite }
@keyframes spin{to{transform:rotate(360deg)}}

button,.btn,a{-webkit-tap-highlight-color:transparent;touch-action:manipulation}
input,select,textarea,button{font-size:16px}

/* Koyu otomatik */
@media (prefers-color-scheme:dark){
  :root{--bg1:#0e1713;--bg2:#0b130f;--glass:#0f1713cc;--glass-strong:#0f1713e6;--stroke:#1f2a24;--text:#e5f1ea;--muted:#9db2a6}
  .tab{background:#0f1713f0;color:#cfe2d7;border-color:#1f2a24}
  .tab--active{background:#123a2a;color:#ddffe9;border-color:#225d3e;box-shadow:0 12px 26px rgba(12,83,52,.35)}
  .subdock,.card,.icon-btn{background:var(--glass-strong)}
}
