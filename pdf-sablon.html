<!DOCTYPE html>
<html lang="tr">
<head>
  <meta charset="UTF-8" />
  <title>Talebe PDF Åžablon</title>
  <style>
    body { margin: 0; font-family: 'Segoe UI', sans-serif; background-color: #f1f1f1; }
    .sayfa {
      width: 800px; margin: 20px auto; background-color: white;
      padding: 30px 40px; box-sizing: border-box; border: 1px solid #ccc;
    }
    .baslik { display: flex; justify-content: space-between; align-items: center; }
    .baslik-sol h1 { font-size: 18px; margin: 0 0 4px 0; }
    .baslik-sol h2 { font-size: 13px; font-weight: normal; margin: 0; }
    .baslik-sag {
      width: 100px; height: 100px; border-radius: 50%;
      background-color: #e4e4e4; background-size: cover;
      background-position: center; display: flex; align-items: center;
      justify-content: center; font-size: 24px; font-weight: bold;
    }
    .isim { font-size: 26px; font-weight: bold; margin: 20px 0 10px 0; }
    .row { display: flex; gap: 10px; margin: 10px 0; }
    .etiketli { flex: 1; }
    .etiketli label {
      font-size: 14px; font-weight: bold; margin-bottom: 4px; display: block;
    }
    .kutu {
      background-color: #f3f3f3; border: 1px solid #ccc; padding: 7px 10px;
      font-size: 14px; min-height: 28px; font-weight: bold;
    }
    .bolum-baslik {
      display: flex; align-items: center; background-color: #2f4f30;
      color: white; margin: 30px 0 10px; padding: 5px 10px;
      font-size: 15px; font-weight: bold;
    }
    .bolum-harf {
      background-color: #d94141; padding: 4px 12px;
      margin-right: 10px; border-radius: 3px; font-weight: bold;
    }
    .mezhep-btnlar { display: flex; gap: 5px; margin-top: 5px; }
    .mezhep-btn {
      border: 1px solid #ccc; padding: 3px 10px; border-radius: 4px;
      font-size: 13px; background-color: white;
    }
    .mezhep-btn.aktif {
      background-color: #d3e8d3; border-color: #68b268;
    }
    .tek-satir { margin: 15px 0; }
    .tek-satir label {
      font-size: 14px; font-weight: bold; margin-right: 10px;
    }
    .tek-satir span {
      background-color: #f3f3f3; border: 1px solid #ccc;
      padding: 6px 10px; font-size: 14px; font-weight: bold;
    }
    .btn-alani { text-align: center; margin-top: 30px; }
    button {
      padding: 10px 20px; background-color: #4a637d;
      border: none; color: white; font-size: 15px;
      border-radius: 5px; cursor: pointer;
    }
    button:hover { background-color: #3b526b; }
  </style>
</head>
<body>
  <div class="sayfa" id="pdfAlani">
    <div class="baslik">
      <div class="baslik-sol">
        <h1>KARAAÄžAÃ‡ FATÄ°H DAÄ°MÄ° TEKÃ‚MÃœLALTI</h1>
        <h2>2025-2026 EÄŸitim YÄ±lÄ± | 6. Devre</h2>
      </div>
      <div class="baslik-sag" id="profilFoto">ðŸ‘¤</div>
    </div>

    <div class="isim" id="isim">...</div>
    <div class="tek-satir"><label>GeldiÄŸi Kurs:</label><span id="kurs">...</span></div>

    <div class="bolum-baslik"><div class="bolum-harf">A</div>TALEBE BÄ°LGÄ°LERÄ°</div>
    <div class="row">
      <div class="etiketli"><label>Kimlikteki AdÄ±</label><div class="kutu" id="kimlikAd">...</div></div>
      <div class="etiketli"><label>Durum</label><div class="kutu" id="durum">...</div></div>
    </div>
    <div class="row">
      <div class="etiketli"><label>DoÄŸum Tarihi</label><div class="kutu" id="dogumTarihi">...</div></div>
      <div class="etiketli"><label id="tcLabel">TC Kimlik</label><div class="kutu" id="tcKimlik">...</div></div>
    </div>
    <div class="row">
      <div class="etiketli"><label>Memleket</label><div class="kutu" id="memleket">...</div></div>
      <div class="etiketli"><label>Kan Grubu</label><div class="kutu" id="kanGrubu">...</div></div>
    </div>
    <div class="etiketli"><label>Mezhep</label>
      <div class="mezhep-btnlar" id="mezhepBtns"></div>
    </div>

    <div class="bolum-baslik"><div class="bolum-harf">B</div>OKUL BÄ°LGÄ°LERÄ°</div>
    <div class="row">
      <div class="etiketli"><label>Ã–ÄŸrenim Seviyesi</label><div class="kutu" id="ogrenimSeviyesi">...</div></div>
      <div class="etiketli"><label>Mezuniyet Durumu</label><div class="kutu" id="mezuniyetDurumu">...</div></div>
      <div class="etiketli"><label>EÄŸitim TÃ¼rÃ¼</label><div class="kutu" id="egitimTuru">...</div></div>
    </div>

    <div class="bolum-baslik"><div class="bolum-harf">C</div>ADRES BÄ°LGÄ°LERÄ°</div>
    <div class="row"><div class="etiketli"><label>Ä°l / Ä°lÃ§e / Mahalle</label><div class="kutu" id="adresBolge">...</div></div></div>
    <div class="row"><div class="etiketli"><label>AÃ§Ä±k Adres</label><div class="kutu" id="adresAcik">...</div></div></div>

    <div class="bolum-baslik"><div class="bolum-harf">D</div>AÄ°LE BÄ°LGÄ°LERÄ°</div>
    <div class="row">
      <div class="etiketli"><label>Baba</label>
        <div class="kutu" id="babaAd">...</div>
        <div class="kutu" id="babaTel">...</div>
        <div class="kutu" id="babaMeslek">...</div>
        <div class="kutu" id="babaDurum">...</div>
      </div>
      <div class="etiketli"><label>Anne</label>
        <div class="kutu" id="anneAd">...</div>
        <div class="kutu" id="anneTel">...</div>
        <div class="kutu" id="anneMeslek">...</div>
        <div class="kutu" id="anneDurum">...</div>
      </div>
    </div>
    <div class="row">
      <div class="etiketli"><label>Maddi Durum</label><div class="kutu" id="maddiDurum">...</div></div>
      <div class="etiketli"><label>Kursta Okuyan</label><div class="kutu" id="kurstakiKardesSayisi">...</div></div>
      <div class="etiketli"><label>KardeÅŸ SayÄ±sÄ±</label><div class="kutu" id="kardesSayisi">...</div></div>
    </div>

    <div class="bolum-baslik"><div class="bolum-harf">E</div>SAÄžLIK BÄ°LGÄ°LERÄ°</div>
    <div class="row"><div class="etiketli"><label>Not</label><div class="kutu" id="saglikNot">...</div></div></div>

    <div class="bolum-baslik"><div class="bolum-harf">F</div>VAZÄ°FE BÄ°LGÄ°LERÄ°</div>
    <div class="row"><div class="etiketli"><label>Vazifeler</label><div class="kutu" id="vazifeler">...</div></div></div>
    <div class="row"><div class="etiketli"><label>Cuma NamazÄ± KÄ±ldÄ±rabilir</label><div class="kutu" id="cumaKilabilir">...</div></div></div>
  </div>

  <div class="btn-alani"><button onclick="pdfCiktisiAl()">PDF Ã‡Ä±ktÄ±sÄ± Al</button></div>

<!-- Firebase core kÃ¼tÃ¼phaneleri (compat sÃ¼rÃ¼m) -->
<script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-auth-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-firestore-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-storage-compat.js"></script>

<!-- Ortak Firebase config ve servis dosyasÄ± -->
<script src="js/firebase-init.js"></script>

  <script>
    const firebaseConfig = {
      // ðŸ”’ Senin firebase yapÄ±landÄ±rman buraya gelecek
    };
    firebase.initializeApp(firebaseConfig);
    const db = firebase.firestore();

    function pdfCiktisiAl() {
      const el = document.getElementById("pdfAlani");
      html2pdf().from(el).save("talebe-bilgisi.pdf");
    }

    const uid = localStorage.getItem("aktifTalebeUID");
    if (!uid) alert("Talebe seÃ§ilmedi.");
    else {
      db.collection("talebeler").doc(uid).get().then(doc => {
        if (!doc.exists) return alert("Talebe bulunamadÄ±.");
        const d = doc.data();

        document.getElementById("isim").innerText = d.kullAd || "-";
        document.getElementById("kurs").innerText = d.kurs || "-";
        document.getElementById("kimlikAd").innerText = d.kimlikAd || "-";
        document.getElementById("dogumTarihi").innerText = d.dogumTarihi || "-";
        document.getElementById("tcKimlik").innerText = d.tc || "-";
        document.getElementById("durum").innerText = d.durum || "-";
        document.getElementById("memleket").innerText = d.memleket || "-";
        document.getElementById("kanGrubu").innerText = d.kanGrubu || "-";
        document.getElementById("ogrenimSeviyesi").innerText = d.ogrenimSeviyesi || "-";
        document.getElementById("mezuniyetDurumu").innerText = d.mezuniyetDurumu || "-";
        document.getElementById("egitimTuru").innerText = d.egitimTuru || "-";
        document.getElementById("adresBolge").innerText = `${d.adresIl || '-'}/${d.adresIlce || '-'}/${d.adresMahalle || '-'}`;
        document.getElementById("adresAcik").innerText = d.adresAcik || "-";
        document.getElementById("babaAd").innerText = d.babaAd || "-";
        document.getElementById("babaTel").innerText = d.babaTel || "-";
        document.getElementById("babaMeslek").innerText = d.babaMeslek || "-";
        document.getElementById("babaDurum").innerText = d.babaDurum || "-";
        document.getElementById("anneAd").innerText = d.anneAd || "-";
        document.getElementById("anneTel").innerText = d.anneTel || "-";
        document.getElementById("anneMeslek").innerText = d.anneMeslek || "-";
        document.getElementById("anneDurum").innerText = d.anneDurum || "-";
        document.getElementById("maddiDurum").innerText = d.maddiDurum || "-";
        document.getElementById("kardesSayisi").innerText = d.kardesSayisi || "-";
        document.getElementById("kurstakiKardesSayisi").innerText = d.kurstakiKardesSayisi || "-";
        document.getElementById("saglikNot").innerText = d.saglikNot || "-";
        document.getElementById("vazifeler").innerText = (d.vazifeCheckboxGrup || []).concat(d.digerInput || []).join(", ");
        document.getElementById("cumaKilabilir").innerText = d.cumaKilabilir || "-";

        const foto = d.fotograf || `https://ui-avatars.com/api/?name=${d.kullAd || "Talebe"}&background=random`;
        document.getElementById("profilFoto").style.backgroundImage = `url('${foto}')`;

        const mezhepBtns = ["Hanefi", "Åžafi", "Maliki", "Hanbeli"]
          .map(m => `<div class="mezhep-btn${d.mezhep === m ? ' aktif' : ''}">${m}</div>`)
          .join("");
        document.getElementById("mezhepBtns").innerHTML = mezhepBtns;
      });
    }
  </script>
</body>
</html>
